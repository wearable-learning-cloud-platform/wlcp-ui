<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE xml>
<core:FragmentDefinition xmlns="sap.m"
	xmlns:core="sap.ui.core"
	xmlns:l="sap.ui.layout"
	xmlns:f="sap.f"
	xmlns:card="sap.f.cards"
	xmlns:html="http://www.w3.org/1999/xhtml">

	<Dialog id="startGameInstance" title = "Assign Names to Players" class="noselect">
	
		<buttons>
			<Button id="wizardBackButton" text="Previous Step" visible="false" press="handleWizardBackButton" />
			<Button id="wizardNextButton" text="Next Step" type="Emphasized" visible="true" press="handleWizardNextButton" />
			<Button id="wizardStartGameButton" text="Start Game" type="Emphasized" visible="false" press="handleWizardSubmit" />
			<Button id="wizardCancelButton" text="Cancel" type="Transparent" visible="true" press="handleWizardCancel"/>
		</buttons>

		<Wizard id="gameInstanceWizard" showNextButton="false" navigationChange="handleNavigationChange" renderMode="Page">
			<WizardStep id="selectStep" title="Select Game to Play">
				<IconTabBar select="selectGame">
					<items>
						<IconTabFilter text="{i18n>gameEditor.load.yourGames}" key="private">
							<FlexBox alignItems="Center" justifyContent="Center">
								<Label textAlign="Center" text="{i18n>gameEditor.load.selectDropDown}:" />
							</FlexBox>
							<FlexBox alignItems="Center" justifyContent="Center">
								<ComboBox id="userLoadGameComboBox" items="{/privateGames}" placeholder="{i18n>gameEditor.load.selectGame}">
									<core:Item key="{gameId}" text="{gameId}" />
								</ComboBox>
							</FlexBox>
						</IconTabFilter>
						<IconTabFilter text="{i18n>gameEditor.load.publicGames}" key="public">
							<FlexBox alignItems="Center" justifyContent="Center">
								<Label textAlign="Center" text="{i18n>gameEditor.load.selectDropDown}:" />
							</FlexBox>
							<FlexBox alignItems="Center" justifyContent="Center">
								<ComboBox id="publicLoadGameComboBox" items="{/publicGames}" placeholder="{i18n>gameEditor.load.selectGame}">
									<core:Item key="{gameId}" text="{gameId}" />
								</ComboBox>
							</FlexBox>
						</IconTabFilter>
					</items>
				</IconTabBar>
			</WizardStep>
			<WizardStep id="assignStep" title="Assign Names to Players">
				<VBox id="switchSection">
					<MessageStrip text="Do you want to assign names to players before starting the game?" type="Warning" enableFormattedText="true" showIcon="true" class="sapUiMediumMarginBottom"/>
					<Switch customTextOn="Yes" customTextOff="No" change="switch"/>
				</VBox>
				<HBox id="assignSection" visible="false">
					<VBox class="sapUiSmallMargin">
						<FlexBox alignItems="Center" justifyContent="Center">
							<Title level="H3" text="Names" textAlign="Center" class="noselect"/>
						</FlexBox>
						<List id="assignPlayerList" items="{/playerNames}" mode="Delete" delete="deleteName" noData="Add Names">
							<StandardListItem title="{title}" class="noselect"/>
						</List>
						<FlexBox alignItems="Center" justifyContent="Center">
							<HBox>
								<Input placeholder="Player Name"/>
								<Button text="Add Name" press="assignName"/>
							</HBox>
						</FlexBox>
						<VBox>
							<FlexBox alignItems="Center" justifyContent="Center">
								<Button text="Download CSV Template" />
							</FlexBox>
							<FlexBox alignItems="Center" justifyContent="Center">
								<Button text="Upload CSV" />
							</FlexBox>
						</VBox>
					</VBox>
					<VBox class="sapUiSmallMargin scroll2">
						<FlexBox alignItems="Center" justifyContent="Center">
							<Title level="H3" text="Players" textAlign="Center" class="noselect"/>
						</FlexBox>
						<f:GridContainer id="playersToSelectFrom" snapToRow="true" items="{/teamPlayers}">
							<f:layout>
								<f:GridContainerSettings columns="{= ${/playerCount} * 2}"/>
							</f:layout>
							<f:Card>
								<f:layoutData>
									<f:GridContainerItemLayoutData minRows="2" columns="2" />
								</f:layoutData>
								<f:header>
									<card:Header title="Team {team} Player {player}" iconSrc="sap-icon://group" class="noselect"/>
								</f:header>
								<f:content>
									<VBox>
										<ObjectStatus class="sapUiSmallMarginBottom" text="{text}" inverted="true" icon="{icon}" state="{state}" />
										<Button icon="sap-icon://delete" visible="{removeVisible}" press="deletePlayerNameAssignment"/>
									</VBox>
								</f:content>
							</f:Card>
						</f:GridContainer>
					</VBox>
				</HBox>
			</WizardStep>
			<WizardStep id="confirmStep" title="Review">
				<MessageStrip text="Confirm Start of Game : {/gameToLoad}" type="Success" enableFormattedText="true" showIcon="true" class="sapUiMediumMarginBottom"/>
			</WizardStep>
		</Wizard>
	</Dialog>
</core:FragmentDefinition>